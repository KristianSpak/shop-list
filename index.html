<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Nákupný zoznam</title>

  <!-- PWA manifest -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#4CAF50">
</head>
<body>

<h1>Nákupný zoznam</h1>

<!-- LOGIN -->
<div id="login" class="container">
  <input id="email" type="email" placeholder="Email" autocomplete="username">
  <input id="password" type="password" placeholder="Heslo" autocomplete="current-password">
  <button onclick="login()">Prihlásiť</button>
</div>

<!-- APP -->
<div id="app" class="container hidden">
  <div class="form">
    <input id="text" placeholder="Položka">
    <input id="count" type="number" min="1" placeholder="Počet">
    <button onclick="addItem()">Pridať</button>
  </div>

  <ul id="list"></ul>

  <button class="logout" onclick="logout()">Odhlásiť</button>
</div>

<!-- Dynamické načítanie CSS a JS (cache-busting) -->
<script>
  const ts = new Date().getTime();

  const link = document.createElement("link");
  link.rel = "stylesheet";
  link.href = `style.css?ts=${ts}`;
  document.head.appendChild(link);

  const script = document.createElement("script");
  script.type = "module";
  script.src = `script.js?ts=${ts}`;
  document.body.appendChild(script);

  // PWA: registrácia service worker
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js')
      .then(() => console.log('Service Worker registered'))
      .catch(err => console.log(err));
  }
</script>

</body>
</html>
